(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[810],{51600:function(e,n,o){(window.__NEXT_P=window.__NEXT_P||[]).push(["/q/server-components",function(){return o(19851)}])},19851:function(e,n,o){"use strict";o.r(n),o.d(n,{default:function(){return d},meta:function(){return c}});var r=o(85893),t=o(25190),s=o(37141);let c={title:"Can I use Mantine components as server components?",description:"Learn about use client directive and server components usage",slug:"server-components",category:"next.js",tags:["server components","use client","next.js","rsc","react server components"],created_at:"December 30, 2023",last_updated_at:"December 30, 2023"},i=(0,s.A)(c);function l(e){let n={a:"a",code:"code",h2:"h2",p:"p",pre:"pre",strong:"strong",...(0,t.a)(),...e.components},{ErrorMessage:o}=n;return o||function(e,n){throw Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("ErrorMessage",!0),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h2,{id:"difference-between-server-and-client-components",children:"Difference between server and client components"}),"\n",(0,r.jsxs)(n.p,{children:["Server components are rendered ",(0,r.jsx)(n.strong,{children:"only on the server"}),", their code is not included in the client bundle.\nIn server components you cannot use hooks (",(0,r.jsx)(n.code,{children:"useState"}),", ",(0,r.jsx)(n.code,{children:"useEffect"}),", ",(0,r.jsx)(n.code,{children:"useRef"}),", custom hooks, for example ",(0,r.jsx)(n.a,{href:"https://mantine.dev/hooks/use-disclosure/",children:"useDisclosure"}),"),\ncompound components (",(0,r.jsx)(n.code,{children:"<Tabs.Tab />"}),", ",(0,r.jsx)(n.code,{children:"<Popover.Dropdown />"}),", etc.), callback functions\nas children (",(0,r.jsx)(n.a,{href:"https://mantine.dev/core/copy-button/#usage",children:"CopyButton example"}),"),\nreference ",(0,r.jsx)(n.code,{children:"window"})," object or add any other client-side logic."]}),"\n",(0,r.jsxs)(n.p,{children:["Client components are rendered ",(0,r.jsx)(n.strong,{children:"both on the server and on the client"}),". They are included in the client bundle and\ncan use all the features, including hooks, compound components, callback functions as children, etc."]}),"\n",(0,r.jsx)(n.h2,{id:"can-i-use-mantine-components-as-server-components",children:"Can I use Mantine components as server components?"}),"\n",(0,r.jsxs)(n.p,{children:["No, all Mantine components are client components and cannot be used as server components.\nIt means that components render ",(0,r.jsx)(n.strong,{children:"both on the server and on the client, not only on client."})]}),"\n",(0,r.jsx)(n.h2,{id:"should-i-add-use-client-directive-to-all-files",children:"Should I add 'use client' directive to all files?"}),"\n",(0,r.jsxs)(n.p,{children:["No, all Mantine components already include ",(0,r.jsx)(n.code,{children:"'use client';"})," directive. You need to add it\nonly to the files where you use hooks, compound components, callback functions as children or any other client-side logic."]}),"\n",(0,r.jsx)(n.h2,{id:"does-use-client-directive-affect-seo",children:"Does 'use client' directive affect SEO?"}),"\n",(0,r.jsxs)(n.p,{children:["No, ",(0,r.jsx)(n.code,{children:"'use client';"})," directive does not affect SEO. Client components are rendered on the server the\nsame way as server components, the only difference is that client components are also included in the client bundle."]}),"\n",(0,r.jsx)(n.h2,{id:"error-hook-is-not-a-function",children:"Error: hook is not a function"}),"\n",(0,r.jsx)(o,{error:"Error: (0 , _barrel_optimize_names_useDisclosure_mantine_hooks__WEBPACK_IMPORTED_MODULE_1__.useDisclosure) is not a function or its return value is not iterable"}),"\n",(0,r.jsxs)(n.p,{children:["This error happens when you try to use hooks in server components. In the example above you are trying to use\n",(0,r.jsx)(n.code,{children:"useDisclosure"})," hook without ",(0,r.jsx)(n.code,{children:"'use client';"})," directive. To fix it, add ",(0,r.jsx)(n.code,{children:"'use client';"})," directive to the top of the file."]}),"\n",(0,r.jsx)(n.p,{children:"Example of code that will throw this error:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:"// ❌ This will throw an error\nimport { useDisclosure } from '@mantine/hooks';\n\nfunction Demo() {\n  const { opened, toggle } = useDisclosure();\n  return (\n    <button onClick={toggle}>{opened ? 'Opened' : 'Closed'}</button>\n  );\n}\n"})}),"\n",(0,r.jsx)(n.p,{children:"Example of code that will work:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:"// ✅ No error\n'use client';\n\nimport { useDisclosure } from '@mantine/hooks';\n\nfunction Demo() {\n  const { opened, toggle } = useDisclosure();\n  return (\n    <button onClick={toggle}>{opened ? 'Opened' : 'Closed'}</button>\n  );\n}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"error-function-cannot-be-passed-as-children",children:"Error: function cannot be passed as children"}),"\n",(0,r.jsx)(o,{error:"Error: Functions cannot be passed directly to Client Components unless you explicitly expose it by marking it with 'use server'."}),"\n",(0,r.jsxs)(n.p,{children:["This error happens when you try to pass callback function as children to server component.\nIf you need to pass callback function as children, you need to add ",(0,r.jsx)(n.code,{children:"'use client';"})," to the top of the file."]}),"\n",(0,r.jsx)(n.p,{children:"Example of code that will throw this error:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:"// ❌ This will throw an error\nimport { CopyButton } from '@mantine/core';\n\nfunction Demo() {\n  return (\n    <CopyButton value=\"https://mantine.dev\">\n      {({ copied, copy }) => (\n        <button color={copied ? 'teal' : 'blue'} onClick={copy}>\n          {copied ? 'Copied url' : 'Copy url'}\n        </button>\n      )}\n    </CopyButton>\n  );\n}\n"})}),"\n",(0,r.jsx)(n.p,{children:"Example of code that will work:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:"// ✅ No error\n'use client';\n\nimport { CopyButton } from '@mantine/core';\n\nfunction Demo() {\n  return (\n    <CopyButton value=\"https://mantine.dev\">\n      {({ copied, copy }) => (\n        <button color={copied ? 'teal' : 'blue'} onClick={copy}>\n          {copied ? 'Copied url' : 'Copy url'}\n        </button>\n      )}\n    </CopyButton>\n  );\n}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"error-hook-usage-in-server-component",children:"Error: hook usage in server component"}),"\n",(0,r.jsx)(o,{error:"You're importing a component that needs useRef. It only works in a Client Component but none of its parents are marked with 'use client', so they're Server Components by default."}),"\n",(0,r.jsxs)(n.p,{children:["The error above occurs when you try to use hook (",(0,r.jsx)(n.code,{children:"useState"}),", ",(0,r.jsx)(n.code,{children:"useRef"}),", ",(0,r.jsx)(n.code,{children:"useReducer"}),", ",(0,r.jsx)(n.code,{children:"useEffect"}),", any other hook) in server component.\nTo fix it, add ",(0,r.jsx)(n.code,{children:"'use client';"})," directive to the top of the file."]}),"\n",(0,r.jsx)(n.p,{children:"Example of code that will throw this error:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:"// ❌ This will throw an error\nimport { useRef } from 'react';\n\nfunction Demo() {\n  const ref = useRef();\n}\n"})}),"\n",(0,r.jsx)(n.p,{children:"Example of code that will work:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:"// ✅ No error\n'use client';\n\nimport { useRef } from 'react';\n\nfunction Demo() {\n  const ref = useRef();\n}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"error-compound-components-in-server-component",children:"Error: compound components in server component"}),"\n",(0,r.jsx)(o,{error:"Could not find the module 'x/node_modules/@mantine/core/esm/components/Popover/Popover.mjs#Popover#Target' in the React Client Manifest. This is probably a bug in the React Server Components bundler."}),"\n",(0,r.jsxs)(n.p,{children:["The error above occurs when you try to use compound component (",(0,r.jsx)(n.code,{children:"<Tabs.Tab />"}),", ",(0,r.jsx)(n.code,{children:"<Popover.Dropdown />"}),", etc.) in server component.\nTo fix it, add ",(0,r.jsx)(n.code,{children:"'use client';"})," directive to the top of the file or replace compound components with regular components (",(0,r.jsx)(n.code,{children:"TabsTab"}),", ",(0,r.jsx)(n.code,{children:"PopoverDropdown"}),", etc.)."]}),"\n",(0,r.jsx)(n.p,{children:"Example of code that will throw this error:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:"// ❌ This will throw an error\nimport { Popover } from '@mantine/core';\n\nfunction Demo() {\n  return (\n    <Popover>\n      <Popover.Target>\n        <button>Toggle popover</button>\n      </Popover.Target>\n    </Popover>\n  );\n}\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Solution 1: add ",(0,r.jsx)(n.code,{children:"'use client';"})," directive to the top of the file:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:"// ✅ No error\n'use client';\n\nimport { Popover } from '@mantine/core';\n\nfunction Demo() {\n  return (\n    <Popover>\n      <Popover.Target>\n        <button>Toggle popover</button>\n      </Popover.Target>\n    </Popover>\n  );\n}\n"})}),"\n",(0,r.jsx)(n.p,{children:"Solution 2: replace compound components with regular components:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:"// ✅ No error, 'use client' directive is not required\nimport { Popover, PopoverTarget } from '@mantine/core';\n\nfunction Demo() {\n  return (\n    <Popover>\n      <PopoverTarget>\n        <button>Toggle popover</button>\n      </PopoverTarget>\n    </Popover>\n  );\n}\n"})})]})}function d(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.jsx)(i,{...e,children:(0,r.jsx)(l,{...e})})}}},function(e){e.O(0,[3671,3455,9774,2888,179],function(){return e(e.s=51600)}),_N_E=e.O()}]);